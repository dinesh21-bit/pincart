<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pincart</title>

<!-- ðŸ”¥ FAVICON (Logo in Browser Tab) -->
<link rel="icon" id="favicon" href="https://via.placeholder.com/40">

<style>
:root{
 --headerColor:#111;
 --footerColor:#111;
 --brandColor:#ffffff;
 --discountColor:#e60023;
}

body{
 margin:0;
 font-family:Arial, sans-serif;
 background:#f4f6f9;
}

header{
 background:var(--headerColor);
 color:white;
 padding:15px;
 display:flex;
 align-items:center;
 justify-content:space-between;
 flex-wrap:wrap;
}

.brand{
 display:flex;
 align-items:center;
 cursor:pointer;
}

.brand img{
 width:40px;
 height:40px;
 margin-right:10px;
 border-radius:50%;
}

.brand h1{
 margin:0;
 color:var(--brandColor);
}

#search{
 padding:8px;
 width:200px;
 max-width:100%;
}

.filters{
 display:flex;
 justify-content:center;
 flex-wrap:wrap;
 gap:10px;
 padding:10px;
}

.filters button{
 padding:8px 12px;
 cursor:pointer;
 border:none;
 background:#ddd;
 border-radius:5px;
}

.products{
 display:grid;
 grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
 gap:20px;
 padding:20px;
}

.card{
 background:white;
 padding:15px;
 border-radius:10px;
 box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

.card img{
 width:100%;
 height:200px;
 object-fit:cover;
 border-radius:8px;
}

.price{
 font-weight:bold;
}

.discount{
 color:var(--discountColor);
 font-weight:bold;
 margin-left:8px;
}

.buy{
 display:inline-block;
 background:#ff9900;
 color:white;
 padding:8px 12px;
 text-decoration:none;
 border-radius:5px;
 margin-top:8px;
}

.deleteBtn{
 background:red;
 color:white;
 border:none;
 margin-top:8px;
 border-radius:5px;
 padding:8px 12px;
}

footer{
 background:var(--footerColor);
 color:white;
 text-align:center;
 padding:20px;
}

.panel{
 display:none;
 position:fixed;
 top:50%;
 left:50%;
 transform:translate(-50%,-50%);
 background:white;
 padding:20px;
 width:300px;
 z-index:1000;
 box-shadow:0 0 10px black;
}

.panel input, .panel textarea{
 width:100%;
 margin-bottom:10px;
 padding:6px;
}

.overlay{
 display:none;
 position:fixed;
 width:100%;
 height:100%;
 background:rgba(0,0,0,0.5);
 top:0;
 left:0;
}

.cartCursor{
 cursor:url('https://cdn-icons-png.flaticon.com/32/263/263142.png'), auto;
}
</style>
</head>

<body>

<header>
 <div class="brand">
  <img id="logo" src="https://via.placeholder.com/40">
  <h1>Pincart</h1>
 </div>
 <input type="text" id="search" placeholder="Search products...">
</header>

<div class="filters">
 <button onclick="sortProducts('low')">Low â†’ High</button>
 <button onclick="sortProducts('high')">High â†’ Low</button>
 <button onclick="sortProducts('popular')">Popularity</button>
 <button onclick="sortProducts('newest')">Newest</button>
 <button onclick="sortProducts('relevance')">Relevance</button>
</div>

<div class="products" id="productList"></div>

<footer>
 Â© 2026 Pincart | Affiliate Store
</footer>

<div class="overlay" id="overlay"></div>

<div class="panel" id="adminPanel">
 <h3>Add Product</h3>
 <input type="text" id="title" placeholder="Title">
 <textarea id="desc" placeholder="Description"></textarea>
 <input type="number" id="price" placeholder="Original Price">
 <input type="number" id="discount" placeholder="Discount %">
 <input type="text" id="link" placeholder="Amazon Link">
 <input type="file" id="images" multiple>
 <button onclick="addProduct()">Add</button>
</div>

<!-- ðŸ”¥ FIREBASE SCRIPT -->
<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDG48UV13XoQ1qtw5xtpnDnSwtmi4MUw84",
  authDomain: "pincart-245f7.firebaseapp.com",
  projectId: "pincart-245f7",
  storageBucket: "pincart-245f7.firebasestorage.app",
  messagingSenderId: "812846953819",
  appId: "1:812846953819:web:5e2eb1b090e62c2367567e"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let products = [];
const productList = document.getElementById("productList");

/* LOAD PRODUCTS FROM FIRESTORE */
async function loadProducts(){
 products=[];
 const querySnapshot = await getDocs(collection(db,"products"));
 querySnapshot.forEach((docSnap)=>{
   products.push({id:docSnap.id, ...docSnap.data()});
 });
 render(products);
}

window.addEventListener("DOMContentLoaded", loadProducts);

/* RENDER */
function render(list){
 productList.innerHTML="";
 list.forEach((p)=>{
  productList.innerHTML+=`
  <div class="card">
   <img src="${p.images[0]}">
   <h3>${p.title}</h3>
   <p>${p.desc}</p>
   <p class="price">â‚¹${p.price}
   <span class="discount">-${p.discount}%</span></p>
   <a href="${p.link}" target="_blank" class="buy">View</a>
  </div>`;
 });
}

/* ADD PRODUCT */
window.addProduct = async function(){
 const title=document.getElementById("title").value;
 const desc=document.getElementById("desc").value;
 const price=Number(document.getElementById("price").value);
 const discount=Number(document.getElementById("discount").value);
 const link=document.getElementById("link").value;
 const files=document.getElementById("images").files;

 let images=[];
 for(let file of files){
   images.push(await toBase64(file));
 }

 await addDoc(collection(db,"products"),{
   title,desc,price,discount,link,images,
   views:0,
   created:Date.now()
 });

 loadProducts();
}

function toBase64(file){
 return new Promise((resolve,reject)=>{
   const reader=new FileReader();
   reader.readAsDataURL(file);
   reader.onload=()=>resolve(reader.result);
   reader.onerror=error=>reject(error);
 });
}

/* SORTING */
window.sortProducts=function(type){
 let sorted=[...products];

 if(type==="low") sorted.sort((a,b)=>a.price-b.price);
 if(type==="high") sorted.sort((a,b)=>b.price-a.price);
 if(type==="popular") sorted.sort((a,b)=>b.views-a.views);
 if(type==="newest") sorted.sort((a,b)=>b.created-a.created);
 if(type==="relevance"){
  const text=document.getElementById("search").value.toLowerCase();
  sorted.sort((a,b)=>
   b.title.toLowerCase().includes(text) -
   a.title.toLowerCase().includes(text)
  );
 }

 render(sorted);
}

</script>

</body>
</html>
