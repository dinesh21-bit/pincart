<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pincart - Ultra Pro</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>

/* =========================================================
   GLOBAL RESET
========================================================= */

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
}

body{
min-height:100vh;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
background-size:400% 400%;
animation:bgMove 12s ease infinite;
color:white;
overflow-x:hidden;
transition:0.4s ease;
}

@keyframes bgMove{
0%{background-position:0% 50%;}
50%{background-position:100% 50%;}
100%{background-position:0% 50%;}
}

/* =========================================================
   DARK MODE (NEON VERSION)
========================================================= */

body.dark-mode{
background:linear-gradient(135deg,#000000,#1a1a1a,#111111);
}

body.dark-mode .card{
background:rgba(255,255,255,0.05);
backdrop-filter:blur(20px);
border:1px solid rgba(255,255,255,0.1);
}

/* =========================================================
   NAVBAR (GLASSMORPHISM)
========================================================= */

nav{
position:fixed;
top:0;
width:100%;
display:flex;
justify-content:space-between;
align-items:center;
padding:18px 50px;
background:rgba(255,255,255,0.08);
backdrop-filter:blur(20px);
border-bottom:1px solid rgba(255,255,255,0.15);
z-index:1000;
}

.logo-area{
display:flex;
align-items:center;
gap:15px;
}

#siteLogo{
width:50px;
height:50px;
border-radius:12px;
object-fit:cover;
box-shadow:0 0 15px rgba(255,255,255,0.4);
transition:0.3s;
}

.brand-name{
font-size:24px;
font-weight:600;
letter-spacing:1px;
background:linear-gradient(45deg,#ff4d4d,#ff9966);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

.nav-links{
display:flex;
gap:20px;
}

.nav-links button{
background:linear-gradient(45deg,#ff4d4d,#ff9966);
border:none;
padding:8px 18px;
border-radius:30px;
color:white;
cursor:pointer;
font-weight:500;
transition:0.3s;
}

.nav-links button:hover{
transform:scale(1.05);
box-shadow:0 0 15px rgba(255,77,77,0.6);
}

/* =========================================================
   SEARCH SECTION
========================================================= */

.search-container{
margin-top:120px;
display:flex;
justify-content:center;
padding:20px;
}

#searchInput{
width:60%;
max-width:600px;
padding:14px 25px;
border-radius:40px;
border:none;
outline:none;
font-size:15px;
background:rgba(255,255,255,0.15);
color:white;
backdrop-filter:blur(20px);
transition:0.3s;
}

#searchInput:focus{
box-shadow:0 0 20px rgba(255,255,255,0.4);
}

/* =========================================================
   CATEGORY BAR
========================================================= */

.category-bar{
display:flex;
justify-content:center;
flex-wrap:wrap;
gap:12px;
padding:10px 0;
}

.category-bar button{
padding:8px 18px;
border-radius:25px;
border:1px solid rgba(255,255,255,0.4);
background:transparent;
color:white;
cursor:pointer;
transition:0.3s;
}

.category-bar button:hover{
background:white;
color:#111;
}

/* =========================================================
   PRODUCT GRID
========================================================= */

#productList{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
gap:25px;
padding:40px 60px;
}

/* =========================================================
   PRODUCT CARD (PREMIUM DESIGN)
========================================================= */

.card{
position:relative;
background:rgba(255,255,255,0.08);
backdrop-filter:blur(25px);
border-radius:20px;
overflow:hidden;
transition:0.4s;
box-shadow:0 10px 40px rgba(0,0,0,0.4);
animation:fadeInUp 0.6s ease;
}

.card:hover{
transform:translateY(-10px) scale(1.02);
box-shadow:0 15px 60px rgba(0,0,0,0.6);
}

.card img{
width:100%;
height:220px;
object-fit:cover;
}

.card-content{
padding:20px;
}

.card h3{
font-size:18px;
margin-bottom:8px;
}

.card p{
font-size:13px;
opacity:0.8;
margin-bottom:10px;
}

.card button{
background:linear-gradient(45deg,#00c6ff,#0072ff);
border:none;
padding:8px 18px;
border-radius:25px;
color:white;
cursor:pointer;
transition:0.3s;
}

.card button:hover{
box-shadow:0 0 15px rgba(0,114,255,0.6);
}

/* =========================================================
   WISHLIST ICON
========================================================= */

.wishlist{
position:absolute;
top:15px;
right:15px;
background:rgba(255,255,255,0.2);
padding:6px 10px;
border-radius:50%;
cursor:pointer;
transition:0.3s;
}

.wishlist.active{
background:red;
color:white;
box-shadow:0 0 10px red;
}

/* =========================================================
   ADMIN PANEL (SaaS Style)
========================================================= */

#adminPanel{
display:none;
margin:50px auto;
width:90%;
max-width:600px;
background:rgba(255,255,255,0.1);
backdrop-filter:blur(30px);
padding:30px;
border-radius:20px;
box-shadow:0 0 40px rgba(0,0,0,0.6);
animation:fadeInUp 0.6s ease;
}

#adminPanel h2{
margin-bottom:20px;
}

.admin-group{
margin-bottom:15px;
}

.admin-group input{
width:100%;
padding:10px;
border-radius:8px;
border:none;
background:rgba(255,255,255,0.15);
color:white;
outline:none;
}

.admin-group button{
margin-top:10px;
width:100%;
padding:10px;
border:none;
border-radius:25px;
background:linear-gradient(45deg,#ff4d4d,#ff9966);
color:white;
cursor:pointer;
transition:0.3s;
}

.admin-group button:hover{
box-shadow:0 0 15px rgba(255,77,77,0.7);
}

/* =========================================================
   TOAST (FLOATING MODERN)
========================================================= */

#toast{
position:fixed;
bottom:30px;
right:30px;
background:rgba(0,0,0,0.8);
padding:15px 20px;
border-radius:15px;
display:none;
backdrop-filter:blur(10px);
}

/* =========================================================
   LOADER (NEON SPINNER)
========================================================= */

#loader{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.6);
display:none;
justify-content:center;
align-items:center;
z-index:2000;
}

.loader-circle{
width:70px;
height:70px;
border:6px solid rgba(255,255,255,0.2);
border-top:6px solid #00c6ff;
border-radius:50%;
animation:spin 1s linear infinite;
}

@keyframes spin{
to{transform:rotate(360deg);}
}

@keyframes fadeInUp{
from{opacity:0;transform:translateY(20px);}
to{opacity:1;transform:translateY(0);}
}

/* =========================================================
   RESPONSIVE
========================================================= */

@media(max-width:768px){

nav{
padding:15px 20px;
}

#productList{
padding:30px 20px;
}

#searchInput{
width:90%;
}

}

</style>
</head>

<body>

<nav>
<div class="logo-area">
<img id="siteLogo" src="" alt="Logo">
<div class="brand-name">Pincart</div>
</div>

<div class="nav-links">
<button onclick="toggleDarkMode()">Theme</button>
<button onclick="showAdmin()">Admin</button>
<button onclick="logoutUser()">Logout</button>
</div>
</nav>

<div class="search-container">
<input type="text" id="searchInput" placeholder="Search premium trending products...">
</div>

<div class="category-bar">
<button onclick="filterCategory('all')">All</button>
<button onclick="filterCategory('tech')">Tech</button>
<button onclick="filterCategory('fashion')">Fashion</button>
<button onclick="filterCategory('home')">Home</button>
</div>

<div id="productList"></div>

<div id="toast"></div>

<div id="loader">
<div class="loader-circle"></div>
</div>

<div id="adminPanel">
<h2>Admin Control Panel</h2>

<div class="admin-group">
<input type="text" id="productName" placeholder="Product Name">
</div>

<div class="admin-group">
<input type="text" id="productImage" placeholder="Image URL">
</div>

<div class="admin-group">
<input type="text" id="productLink" placeholder="Affiliate Link">
</div>

<div class="admin-group">
<input type="text" id="productCategory" placeholder="Category (tech/fashion/home)">
</div>

<div class="admin-group">
<button onclick="addProduct()">Add Product</button>
</div>

<hr><br>

<h3>Upload Logo</h3>
<input type="file" id="logoUpload">
<button onclick="uploadLogo()">Upload Logo</button>

<br><br>

<h3>Upload Background</h3>
<input type="file" id="bgUpload">
<button onclick="uploadBackground()">Upload Background</button>

</div>
<script type="module">

/* =========================================================
   FIREBASE IMPORTS
========================================================= */

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

/* =========================================================
   YOUR FIREBASE CONFIG (KEEP YOURS)
========================================================= */

const firebaseConfig = {
  apiKey: "AIzaSyDG48UV13XoQ1qtw5xtpnDnSwtmi4MUw84",
  authDomain: "pincart-245f7.firebaseapp.com",
  projectId: "pincart-245f7",
  storageBucket: "pincart-245f7.firebasestorage.app",
  messagingSenderId: "812846953819",
  appId: "1:812846953819:web:5e2eb1b090e62c2367567e"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);
const storage = getStorage(app);

/* =========================================================
   GLOBAL STATE
========================================================= */

let allProducts = [];
let currentCategory = "all";
let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];

/* =========================================================
   TOAST
========================================================= */

function showToast(message){
  const toast = document.getElementById("toast");
  toast.innerText = message;
  toast.style.display="block";
  setTimeout(()=>{ toast.style.display="none"; },3000);
}

/* =========================================================
   LOADER
========================================================= */

function showLoader(){
  document.getElementById("loader").style.display="flex";
}

function hideLoader(){
  document.getElementById("loader").style.display="none";
}

/* =========================================================
   DARK MODE
========================================================= */

window.toggleDarkMode = function(){
  document.body.classList.toggle("dark-mode");
}

/* =========================================================
   ADMIN PANEL SHOW
========================================================= */

window.showAdmin = function(){
  document.getElementById("adminPanel").style.display="block";
}

/* =========================================================
   LOGOUT
========================================================= */

window.logoutUser = function(){
  signOut(auth);
  showToast("Logged Out");
}

/* =========================================================
   ADMIN EMAIL RESTRICTION
========================================================= */

onAuthStateChanged(auth,(user)=>{
  if(user){
    if(user.email !== "youradminemail@gmail.com"){
      document.getElementById("adminPanel").style.display="none";
    }
  }
});

/* =========================================================
   ADD PRODUCT (FIRESTORE)
========================================================= */

window.addProduct = async function(){

  const name = document.getElementById("productName").value;
  const image = document.getElementById("productImage").value;
  const link = document.getElementById("productLink").value;
  const category = document.getElementById("productCategory").value;

  if(!name || !image || !link || !category){
    showToast("Fill all fields");
    return;
  }

  showLoader();

  await addDoc(collection(db,"products"),{
    name:name,
    image:image,
    link:link,
    category:category,
    views:0,
    createdAt:Date.now()
  });

  hideLoader();
  showToast("Product Added");
}

/* =========================================================
   REALTIME PRODUCTS
========================================================= */

onSnapshot(collection(db,"products"),(snapshot)=>{
  allProducts = [];
  snapshot.forEach(docSnap=>{
    allProducts.push({id:docSnap.id,...docSnap.data()});
  });
  renderProducts();
});

/* =========================================================
   RENDER PRODUCTS
========================================================= */

function renderProducts(){

  const productList = document.getElementById("productList");
  productList.innerHTML="";

  let filtered = allProducts;

  if(currentCategory !== "all"){
    filtered = filtered.filter(p=>p.category===currentCategory);
  }

  filtered.forEach(product=>{

    productList.innerHTML += `
      <div class="card">
        <div class="wishlist ${wishlist.includes(product.id) ? "active":""}" onclick="toggleWishlist('${product.id}')">‚ù§</div>
        <img src="${product.image}" loading="lazy">
        <div class="card-content">
          <h3>${product.name}</h3>
          <p>Views: ${product.views}</p>
          <button onclick="trackView('${product.id}','${product.link}')">Buy Now</button>
          <button onclick="deleteProduct('${product.id}')">Delete</button>
        </div>
      </div>
    `;
  });
}

/* =========================================================
   CATEGORY FILTER
========================================================= */

window.filterCategory = function(cat){
  currentCategory = cat;
  renderProducts();
}

/* =========================================================
   SEARCH FILTER
========================================================= */

document.getElementById("searchInput").addEventListener("input",function(){
  const value = this.value.toLowerCase();
  const cards = document.querySelectorAll(".card");
  cards.forEach(card=>{
    const text = card.innerText.toLowerCase();
    card.style.display = text.includes(value) ? "block":"none";
  });
});

/* =========================================================
   VIEW TRACKING
========================================================= */

window.trackView = async function(id,link){

  await updateDoc(doc(db,"products",id),{
    views:increment(1)
  });

  window.open(link,"_blank");
}

/* =========================================================
   DELETE PRODUCT
========================================================= */

window.deleteProduct = async function(id){

  if(confirm("Delete this product?")){
    await deleteDoc(doc(db,"products",id));
    showToast("Deleted");
  }
}

/* =========================================================
   WISHLIST
========================================================= */

window.toggleWishlist = function(id){

  if(wishlist.includes(id)){
    wishlist = wishlist.filter(item=>item!==id);
    showToast("Removed from Wishlist");
  }else{
    wishlist.push(id);
    showToast("Added to Wishlist");
  }

  localStorage.setItem("wishlist",JSON.stringify(wishlist));
  renderProducts();
}

/* =========================================================
   LOGO STORAGE (FIREBASE STORAGE)
========================================================= */

window.uploadLogo = async function(){

  const file = document.getElementById("logoUpload").files[0];
  if(!file){
    showToast("Select file");
    return;
  }

  showLoader();

  const logoRef = ref(storage,"branding/logo.png");
  await uploadBytes(logoRef,file);
  const url = await getDownloadURL(logoRef);

  localStorage.setItem("pincartLogo",url);
  document.getElementById("siteLogo").src = url;

  hideLoader();
  showToast("Logo Updated");
}

/* Load Logo */

const savedLogo = localStorage.getItem("pincartLogo");
if(savedLogo){
  document.getElementById("siteLogo").src = savedLogo;
}

/* =========================================================
   BACKGROUND STORAGE (FIREBASE STORAGE)
========================================================= */

window.uploadBackground = async function(){

  const file = document.getElementById("bgUpload").files[0];
  if(!file){
    showToast("Select file");
    return;
  }

  showLoader();

  const bgRef = ref(storage,"branding/background.png");
  await uploadBytes(bgRef,file);
  const url = await getDownloadURL(bgRef);

  localStorage.setItem("pincartBG",url);
  document.body.style.backgroundImage = `url(${url})`;
  document.body.style.backgroundSize = "cover";

  hideLoader();
  showToast("Background Updated");
}

/* Load Background */

const savedBG = localStorage.getItem("pincartBG");
if(savedBG){
  document.body.style.backgroundImage = `url(${savedBG})`;
  document.body.style.backgroundSize = "cover";
}

</script>
</body>
</html>
